<!doctype html>
<html lang="ru">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ascend_Beta</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        /* Убирает спиннеры в Chrome, Safari, Edge, and Opera */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Класс для скрытия таблиц */
        .not-shown {
            display: none;
        }
    </style>

</head>

<body class="bg-body-tertiary">

    <header>
        <!-- Навигационная панель (можно добавить ScrollSpy) -->
        <nav class="navbar bg-body-tertiary shadow rounded mb-5 p-3">
            <div class="container-fluid">
                <a class="navbar-brand" href="https://justfin.tech/">
                    <img src="icons/justfintech.svg" alt="Logo" width="auto" height="30"
                        class="d-inline-block align-text-top">
                </a>
            </div>
        </nav>
    </header>

    <main>
        <div class="container text-center">

            <div class="row row-cols-3 gx-5 mt-5 align-items-start justify-content-center">
                <div class="col-lg">
                    <div class="col-md text-center bg-white rounded p-2 border">
                        <h5>
                            Средний курс
                        </h5>
                        <p>
                            Lorem ipsum text text text text
                        </p>
                    </div>
                </div>
                <div class="col-lg">
                    <div class="col-md text-center bg-white rounded p-2 border">
                        <h5>
                            История курсов
                        </h5>
                        <p>
                            Lorem ipsum text text text text
                        </p>
                    </div>
                </div>
                <div class="col-lg">
                    <div class="col-md text-center bg-white rounded p-2 border">
                        <h5>
                            Лучшая страна
                        </h5>
                        <p>
                            Lorem ipsum text text text text
                        </p>
                    </div>
                </div>
            </div>

            <div class="row gx-5 mt-5 gy-3 align-items-start">
                <div class="col-lg">
                    <div class="text-center table-responsive bg-white rounded p-2 border">
                        <div class="text-center my-3">
                            <div class="btn-group dropdown-center px-auto">
                                <button type="button" class="btn btn-lg dropdown-toggle" id="button-country"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    {{ countries[0].name }}
                                </button>
                                <ul class="dropdown-menu">
                                    {% for country in countries %}
                                    <li><button class="dropdown-item {{ country.enabled_button}}" type="button"
                                            id="button-{{country.index}}">{{ country.name }}</button></li>
                                    {% endfor %}
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li><button class="dropdown-item" type="button">Best rates</button></li>
                                </ul>
                            </div>
                        </div>
                        {% for country in countries %}
                        <!-- Таблицы с курсами, .not-shown отвечает за скрытие таблицы при нажатии кнопки. CSS для этого класса в <head>. При добавлении новых стран нужно обновить массив таблиц в JS в конце <body> -->
                        <div class="mt-3 mb-3 {{ country.is_visible }}" id="content-{{ country.index }}">
                            <!-- <h5 id="country-name-{{ country.index }}">{{ country.name }}</h5> -->
                            <!-- Менюшка с выбором стран. При добавлении новых стран нужно обновить массив кнопок и привязку обработчиков событий в JS в нижней части <body> -->
                            <table id="table-{{ country.index }}"
                                class="table table-hover overflow-x-scroll mb-1 bg-white">
                                <thead>
                                    <tr>
                                        <td>Bank Name</td>
                                        <td colspan="2">
                                            <div class="container-fluid text-center">
                                                Euro
                                            </div>
                                            <div class="container-fluid text-center">
                                                <div class="row align-items-start">
                                                    <div class="col">
                                                        Sell
                                                    </div>
                                                    <div class="col">
                                                        Buy
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td colspan="2">
                                            <div class="container-fluid text-center">
                                                Dollar
                                            </div>
                                            <div class="container-fluid text-center">
                                                <div class="row align-items-start">
                                                    <div class="col">
                                                        Sell
                                                    </div>
                                                    <div class="col">
                                                        Buy
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    {% for bank in country.rates %}
                                    <tr>
                                        <td id="name-{{ bank.bank }}">{{ bank.bank }}</td>
                                        <td id="{{ bank.bank }}-1">{{ bank.sell_eur }}</td>
                                        <td id="{{ bank.bank }}-2">{{ bank.buy_eur }}</td>
                                        <td id="{{ bank.bank }}-3">{{ bank.sell_usd }}</td>
                                        <td id="{{ bank.bank }}-4">{{ bank.buy_usd }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% endfor %}
                        
                        <div class="not-shown">
                            {% for country in countries %}
                            <table id="table-tech-{{ country.index }}">
                                <tbody>
                                        {% for bank in country.tech_rates %}
                                    <tr>
                                        <td id="tech-name-{{ bank.bank }}">{{ bank.bank }}</td>
                                        <td id="tech-{{ bank.bank }}-1">{{ bank.sell_eur }}</td>
                                        <td id="tech-{{ bank.bank }}-2">{{ bank.buy_eur }}</td>
                                        <td id="tech-{{ bank.bank }}-3">{{ bank.sell_usd }}</td>
                                        <td id="tech-{{ bank.bank }}-4">{{ bank.buy_usd }}</td>
                                    </tr>
                                        {% endfor %}
                                </tbody>
                            </table>
                            {% endfor %}
                        </div>
                    </div>
                </div>



                <!-- Конвертер и кнопка изменения страны -->
                <div class="col-lg">
                    <div class="bg-white rounded p-2 border">
                        <div class="text-center mt-3">
                            <h5>Converter</h5>
                            <div class="row justify-content-center mt-3 px-3">
                                {% for country in countries %}
                                <!-- Формы выбора банка в конвертере. В каждой стране своя форма, .not-shown отвечает за скрытие таблицы при нажатии кнопки. CSS для этого класса в <head>. При добавлении новых стран нужно обновить массив селектов в JS в конце <body> -->
                                <div class="col {{ country.is_visible }}" id="select-{{ country.index}}">
                                    <select class="form-select">
                                        {% for bank in country.rates %}
                                        <option value="{{ loop.index }}" selected> {{ bank.bank }} </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                {% endfor %}
                            </div>
                            <div class="row row-cols-2 justify-content-center mt-2 px-3">
                                <div class="col-xs">
                                    <select class="form-select">
                                        <option value="1" selected>RUB</option>
                                        <option value="2">USD</option>
                                        <option value="3">EUR</option>
                                    </select>
                                </div>
                                <div class="col-xs">
                                    <select class="form-select">
                                        <option value="1">RUB</option>
                                        <option value="2" selected>USD</option>
                                        <option value="3">EUR</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row row-cols-2 justify-content-center mt-2 px-3">
                                <div class="col-xs">
                                    <input type="number" class="form-control" id="floatingInput">
                                </div>
                                <div class="col-xs">
                                    <input type="number" class="form-control" id="floatingInput">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <footer>
        <!-- something -->
    </footer>

    <!-- Скрипт, отвечающий за кнопки в меню. Требуется обновить его при добавлении новых стран. Нужные части кода отмечены комментариями -->
    <script>
        const countries_list = [
            "Armenia",
            "Georgia"
        ]
        // Массив с таблицами (!ОБНОВИТЬ ПРИ ДОБАВЛЕНИИ СТРАНЫ!)
        const tables = [
            document.getElementById('content-am'),
            document.getElementById('content-ge')
        ];
        // Массив с кнопками (!ОБНОВИТЬ ПРИ ДОБАВЛЕНИИ СТРАНЫ!)
        const buttons = [
            document.getElementById('button-am'),
            document.getElementById('button-ge')
        ];
        // Массив со строками select (!ОБНОВИТЬ ПРИ ДОБАВЛЕНИИ СТРАНЫ!)
        const selects = [
            document.getElementById('select-am'),
            document.getElementById('select-ge')
        ];
        // Функция для показа конкретной таблицы и деактивации кнопки
        function showElement(index) {
            tables.forEach((element, i) => {
                if (i === index) {
                    element.classList.remove('not-shown');
                } else {
                    element.classList.add('not-shown');
                }
            });
            buttons.forEach((element, i) => {
                if (i === index) {
                    element.classList.add('disabled');
                } else {
                    element.classList.remove('disabled');
                }
            });
            selects.forEach((element, i) => {
                if (i === index) {
                    element.classList.remove('not-shown');
                } else {
                    element.classList.add('not-shown');
                }
            });
            document.getElementById('button-country').textContent = countries_list[index];
        }
        // Привязка обработчиков событий (!ОБНОВИТЬ ПРИ ДОБАВЛЕНИИ СТРАНЫ!)
        document.getElementById('button-am').addEventListener('click', () => showElement(0));
        document.getElementById('button-ge').addEventListener('click', () => showElement(1));
    </script>
    <!-- Скрипт, отвечающий за работу конвертера. Требуется обновить его при добавлении новых стран. Нужные части кода отмечены комментариями -->
    <script>
        // Скрипт конвертера
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>

</html>